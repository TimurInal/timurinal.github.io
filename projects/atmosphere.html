<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Realtime Atmosphere</title>
  <link rel="icon" type="image/png" href="../img/favicon.png">
  <link rel="stylesheet" type="text/css" href="../styles/styles.css">
  <link rel="stylesheet" type="text/css" href="../styles/main-mobile.css">
  <link rel="stylesheet" type="text/css" href="project-page.css">
  <script src="../scripts/index.js"></script>
  <script src="project-page.js"></script>
</head>
<body>
<div class="navbar">
  <h2 class="navbar-title"><a href="../">Timur Inal</a></h2>
  <ul>
    <li><a href="../">Home</a></li>
    <li><a href="../about">About</a></li>
    <li><a class="active" href="../projects">Projects</a></li>
    <!--<li><a href="#">Blog</a></li>-->
    <li><a href="../contact">Contact</a></li>
  </ul>
</div>

<div class="title">
  <h1 class="text-centre">Realtime Atmosphere Effect</h1>

  <!--    Don't put anything important in the h3 below    -->
  <!--            the text is replaced by code            -->
  <h3 class="text-centre status completed"></h3>
</div>

<hr>

<!-- TODO: create a little utility script that can autogenerate html files for a project page. It will take in normal formatted text and replace \n escape sequences with <br> tags to allow for the browser to render them -->
<div class="main">
  <p>
    I've been working on a space game and for planets, I wanted a realistic atmosphere. Most of the ones I'd found before only looked good from afar, but planets are traversable so the atmosphere had to look good on the planet surface. The way this effect, which is rendered as a post processing effect, works is by simulating light rays going from the camera into the atmosphere and calculating how it bounces around into the sun and how the light interacts with aerosol molecules in the atmosphere.
  </p>
  <p>
    I used the builtin render pipeline as it's much easier to create image effects than in the universal RP or HDRP. One of the optimisations that massively helped performance was precomputing the density of molecules at every point in the atmosphere and storing it in a texture so the shader wouldn't need to do any expensive calculations to figure out the density of molecules in the atmosphere every frame.
  </p>
  <p>
    I've still got some things I want to add, like stars that react to the atmosphere so they fade out during the day. I also have a few issues that need fixing that should improve the look of the atmosphere, like where it gets rendered over transparent geometry as transparent objects aren't included in the depth texture, however I think I can setup a second camera with the purpose of rendering a depth texture for transparent geometry.
  </p>
  <p>
    A really helpful paper was <a href="https://developer.nvidia.com/gpugems/gpugems2/part-ii-shading-lighting-and-shadows/chapter-16-accurate-atmospheric-scattering" style="color: white;">this</a> paper by NVIDIA on accurate atmospheric scattering for realtime games.<br>
    Another helpful resource was <a href="https://www.youtube.com/watch?v=DxfEbulyFcY" style="color: white;">this</a> video by Sebastian Lague which really helped with some of the more Unity-specific issues that the paper didn't cover.
  </p>
</div>

<hr>
<h3 class="text-centre"><strong>Images</strong></h3>

<div class="centre-image">
  <div class="responsive">
    <div class="gallery">
      <a href="img/atmosphere-1.png" target="_blank"><img src="img/atmosphere-1.png" alt="TODO" width="960" height="540"></a>
      <div class="desc"></div>
    </div>
  </div>
  <div class="responsive">
    <div class="gallery">
      <a href="img/atmosphere-2.png" target="_blank"><img src="img/atmosphere-2.png" alt="TODO" width="960" height="540"></a>
      <div class="desc">One of my favourite screenshots of the atmosphere</div>
    </div>
  </div>
  <div class="responsive">
    <div class="gallery">
      <a href="img/Screenshot%202024-02-08%20202617.png" target="_blank"><img src="img/Screenshot%202024-02-08%20202617.png" alt="TODO" width="960" height="540"></a>
      <div class="desc">This was my very first atmosphere using Shader Graph. It looked somewhat decent from very far away but it needed a really high-poly sphere which had a hit on performance</div>
    </div>
  </div>
  <div class="responsive">
    <div class="gallery">
      <a href="img/atmosphere-4.png" target="_blank"><img src="img/atmosphere-4.png" alt="TODO" width="960" height="540"></a>
      <div class="desc">An issue where the very middle of the atmosphere was really bright</div>
    </div>
  </div>
  <div class="responsive">
    <div class="gallery">
      <a href="img/atmosphere-5.png" target="_blank"><img src="img/atmosphere-5.png" alt="TODO" width="960" height="540"></a>
      <div class="desc"></div>
    </div>
  </div>
</div>

<div class="clearfix"></div>
</body>
<footer>
  <hr>
  <p class="text-centre">&copy; 2024 Timur Inal. All rights reserved.</p>
</footer>
</html>